/* Slimmage 0.2.3, use with ImageResizer. MIT/Apache2 dual licensed by Imazen */

(function(e){function p(){if(e.slimmage.verbose&&e.console&&e.console.log)try{e.console.log.apply(e.console,arguments)}catch(a){}}var a=window.slimmage||{};window.slimmage=a;void 0===a.verbose&&(a.verbose=!0);void 0===a.tryWebP&&(a.tryWebP=!1);void 0===a.readyCallback&&(a.readyCallback=null);a.l=function(){if(a.tryWebP&&!a.i){a.i=!0;var d=new Image;d.onload=d.onerror=function(){a.b=2==d.height};d.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}};
a.n=function(a){var c="undefined"!=typeof window.getComputedStyle&&window.getComputedStyle(a,null).getPropertyValue("max-width");!c&&a.currentStyle&&(c=a.currentStyle["max-width".replace(/([a-z])\-([a-z])/,function(a,d,c){return d+c.toUpperCase()})]||a.currentStyle["max-width"]);return c};a.m=function(d){var c=a.n(d);if("px"==c.slice(-2))return parseFloat(c.slice(0,-2));var b=document.createElement("div");b.style.overflow=b.style.visibility="hidden";d.parentNode.appendChild(b);b.style.width=c;c=b.offsetWidth;
d.parentNode.removeChild(b);return c};a.g=function(a){for(var c=[],b=a.length>>>0;b--;)c[b]=a[b];return c};a.k=function(d,c,b){b={b:a.b,width:b,c:window.devicePixelRatio||1};b.a=Math.min(2048,b.width*b.c);b.h=1.49<b.c?80:90;a.b&&(b.h=1.49<b.c?65:78);b.a=b.a-b.a%160+160;var e=d.getAttribute("data-pixel-width")|0;a.e&&"function"===typeof a.e&&a.e(b);b.a>e&&(c=c.replace(/width=\d+/i,"width="+b.a).replace(/quality=[0-9]+/i,"quality="+b.h),a.b&&(c=c.replace(/format=[a-z]+/i,"format=webp")),d.src=c,d.setAttribute("data-pixel-width",
b.a),p("Slimming: updating "+c))};a.j=function(d,c){a.k(d,c,a.m(d))};a.f=function(d){0<a.d&&e.clearTimeout(a.d);a.d=0;if(d&&0<d)a.d=e.setTimeout(a.f,d);else{d=(new Date).getTime();for(var c=0,b=a.g(e.document.getElementsByTagName("noscript")),h=0,l=b.length;h<l;h++){var f=b[h];if(null!==f.getAttribute("data-slimmage")){var m=e.document.createElement("div"),k=f.textContent||f.innerHTML;if(k&&0!=k.replace(/[\s\t\r\n]+/,"").length)m.innerHTML=k.replace(/\s+src\s*=\s*(['"])/i," data-src=$1").replace(/&lt;/g,
"<").replace(/&gt;/g,">").replace(/&amp;/g,"&");else{for(var k=new Image,n=0;n<f.attributes.length;n++){var g=f.attributes[n];g&&g.specified&&0==g.name.indexOf("data-img-")&&k.setAttribute(g.name.slice(9-g.name.length),g.value)}m.appendChild(k)}m=m.getElementsByTagName("img");k=0;for(n=m.length;k<n;k++)g=m[k],null!==g.src&&0<g.src.length&&(g.setAttribute("data-src",g.src),g.src=""),g.setAttribute("data-slimmage",!0),f.parentNode.insertBefore(g,f),c++;f.parentNode.removeChild(f)}}b=0;f=a.g(e.document.getElementsByTagName("img"));
h=0;for(l=f.length;h<l;h++)null!==f[h].getAttribute("data-slimmage")&&(m=f[h].getAttribute("data-src")||f[h].src,a.j(f[h],m),b++);"function"===typeof a.readyCallback&&a.readyCallback();p("Slimmage: restored "+c+" images from noscript tags; sizing "+b+" images. "+((new Date).getTime()-d)+"ms")}};var l=a.f;e.addEventListener?(e.addEventListener("resize",function(){l(500)},!1),e.addEventListener("DOMContentLoaded",function(){l();e.removeEventListener("load",l,!1)},!1),e.addEventListener("load",l,!1)):
e.attachEvent&&e.attachEvent("onload",l);a.l()})(this);
